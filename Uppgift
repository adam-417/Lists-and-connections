using System;
using System.Collections.Generic;
using System.Linq;

public class Inventory
{
    private List<string> items = new List<string>();
    private Dictionary<string, (double price, int stock)> itemDetails = new Dictionary<string, (double, int)>();

    public void AddItem(string name, double price, int stock)
    {
        if (!items.Contains(name))
        {
            items.Add(name);
            itemDetails[name] = (price, stock);
        }
        else
        {
            Console.WriteLine($"Item '{name}' already exists.");
        }
    }

    public void RemoveItem(string name)
    {
        if (items.Contains(name))
        {
            items.Remove(name);
            itemDetails.Remove(name);
            Console.WriteLine($"{name} has been removed from the inventory.");
        }
        else
        {
            Console.WriteLine($"Item '{name}' not found.");
        }
    }

    public void UpdateStock(string name, int newStock)
    {
        if (itemDetails.ContainsKey(name))
        {
            var details = itemDetails[name];
            itemDetails[name] = (details.price, newStock);
            Console.WriteLine($"Stock of {name} updated to {newStock}.");
        }
        else
        {
            Console.WriteLine($"Item '{name}' not found.");
        }
    }

    public void PrintInventory()
    {
        Console.WriteLine("Current Inventory:");
        foreach (var name in items)
        {
            var details = itemDetails[name];
            Console.WriteLine($"Product: {name}, Price: {details.price}, Stock: {details.stock}");
        }
    }

    public void PrintMostExpensiveItem()
    {
        if (itemDetails.Count == 0)
        {
            Console.WriteLine("Inventory is empty.");
            return;
        }

        var mostExpensive = itemDetails.OrderByDescending(i => i.Value.price).First();
        Console.WriteLine($"Most expensive item: {mostExpensive.Key}, Price: {mostExpensive.Value.price}");
    }

    public void PrintTotalInventoryValue()
    {
        double totalValue = itemDetails.Sum(i => i.Value.price * i.Value.stock);
        Console.WriteLine($"Total Inventory Value: {totalValue.ToString("F2")}");
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        Inventory inventory = new Inventory();
        inventory.AddItem("Laptop", 1200.50, 7);
        inventory.AddItem("Smartphone", 799.99, 12);
        inventory.AddItem("Tablet", 399.99, 15);

        inventory.PrintInventory();
        inventory.UpdateStock("Laptop", 5);
        inventory.RemoveItem("Tablet");
        inventory.PrintMostExpensiveItem();
        inventory.PrintTotalInventoryValue();

    }
}
